<div id="wrap">
    <mat-accordion>
        <mat-expansion-panel>
            <mat-expansion-panel-header>
                <mat-panel-title> Format </mat-panel-title>
            </mat-expansion-panel-header>

            <mat-form-field>
                <mat-select [(value)]="selectedFormat" (selectionChange)="onFormatChange()">
                    <mat-option value="png">PNG</mat-option>
                    <mat-option value="jpeg">JPG</mat-option>
                </mat-select>
            </mat-form-field>
        </mat-expansion-panel>

        <mat-expansion-panel>
            <mat-expansion-panel-header>
                <mat-panel-title> Filtre </mat-panel-title>
            </mat-expansion-panel-header>
            <mat-form-field id="filter-names">
                <mat-select [(value)]="selectedFilter" (selectionChange)="setPreviewFilter()">
                    <mat-option *ngFor="let type of typeExportFilter | keyvalue: keepOriginalOrder" [value]="type.value">{{ type.value }}</mat-option>
                    <!-- <mat-option value="none">Aucun</mat-option>
                    <mat-option value="blur">Brouillage</mat-option>
                    <mat-option value="sepia">Sepia</mat-option>
                    <mat-option value="brightness">Luminosité</mat-option>
                    <mat-option value="saturation">Saturation</mat-option>
                    <mat-option value="hue">Rotation HUE</mat-option>
                    <mat-option value="invert">Inversion</mat-option> -->
                </mat-select>
            </mat-form-field>

            <!-- filter slider -->

            <div id="slider-container" [style.display]="sliderIsVisible ? 'block' : 'none'">
                <mat-slider id="filterSlider" min="0" max="1" step="0.01" [value]="percentage" (input)="setFilterPercentage($event.value)">
                </mat-slider>
                <input
                    #filterInput
                    id="filter-input"
                    type="text"
                    [value]="percentage"
                    (input)="setFilterPercentage(filterInput.value)"
                    min="0"
                    max="1"
                    step="0.01"
                    maxlength="4"
                    matInput
                    matSuffix
                />
            </div>
        </mat-expansion-panel>
    </mat-accordion>
    <form>
        <mat-form-field>
            <mat-label>Titre du dessin</mat-label>
            <input matInput [(ngModel)]="drawingTitle" name="drawingTitle" />
        </mat-form-field>
    </form>

    <h3>Prévisualisation du dessin</h3>
    <a #drawingImageContainer href="" download=""> </a>
    <!-- default width and height  -->
    <canvas id="previewCanvas" #previewCanvas width="250" height="250"></canvas>

    <!-- disabled in css -->
    <canvas id="exportCanvas" #exportCanvas width="250" height="250"></canvas>

    <div>
        <button class="buttons" id="downloadButton" mat-raised-button (click)="downloadImage()">Télécharger</button>
        <button class="buttons" id="cancelButton" mat-raised-button mat-dialog-close>Annuler</button>

        <h3 id="canvas-size-string">Taille de l'image: {{ drawingService.canvas.width }} x {{ drawingService.canvas.height }} px</h3>
    </div>
</div>
